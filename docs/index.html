<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="./style.css" />
    <title>KoL Candle Eudora Table</title>
    <script defer src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script type="module" defer src="./app.js"></script>
  </head>
  <body>
    <noscript>This page requires JavaScript</noscript>

    <h1>Candle Eudora Table</h1>
    <p>
      This page provides daily subscription data for
      <a
        href="https://kol.coldfront.net/thekolwiki/index.php/Our_Daily_Candles%E2%84%A2_order_form"
        >Our Daily Candle&trade; order form</a
      >.
    </p>
    <p>Spading data is provided by Ascension Speed Society.</p>
    <p>
      To report technical issues, please contact
      <strong>philmasterplus (#1804931)</strong> in-game.
    </p>

    <main id="app"></main>

    <template id="app-template">
      <main>
        <label for="kol-path">Path: </label>
        <select
          id="kol-path"
          :value="selectedKolPath"
          @change="handleKolPathChange($event.target.value)"
        >
          <option v-for="kolPath in kolPaths" :value="kolPath.id">
            {{ kolPath.name }}
          </option>
        </select>

        <label for="kol-class">Class: </label>
        <select
          id="kol-class"
          :value="selectedKolClass"
          @change="handleKolClassChange($event.target.value)"
        >
          <option v-for="kolClass in kolClasses" :value="kolClass.id">
            {{ kolClass.name }}
          </option>
        </select>

        <table class="table-candle">
          <thead>
            <tr>
              <th>Day</th>
              <th>Equipment</th>
              <th>Premium candle</th>
              <th>Basic candle 1</th>
              <th>Basic candle 2</th>
              <th>Seed</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="candleData in candlesByDate">
              <td>{{ candleData.day }}</td>
              <td><candle-info :candle="candleData.equipment" /></td>
              <td><candle-info :candle="candleData.premium" /></td>
              <td><candle-info :candle="candleData.basic1" /></td>
              <td><candle-info :candle="candleData.basic2" /></td>
              <td>{{ candleData.seed }}</td>
            </tr>
          </tbody>
        </table>
      </main>
    </template>

    <template id="candle-info-template">
      <div v-if="candle" class="candle-info">
        <div class="candle-info__name">{{ candle.name }}</div>
        <div class="candle-info__type">{{ candle.type }}</div>
        <div class="candle-info__effect">{{ effectShortText }}</div>
      </div>
      <div v-else class="candle-info" title="unknown--needs spading">?</div>
    </template>
  </body>
</html>
